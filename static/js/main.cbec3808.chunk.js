(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{200:function(e,t,n){},201:function(e,t,n){},228:function(e,t){},230:function(e,t){},244:function(e,t){},246:function(e,t){},274:function(e,t){},276:function(e,t){},277:function(e,t){},282:function(e,t){},284:function(e,t){},303:function(e,t){},315:function(e,t){},318:function(e,t){},335:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(12),o=n.n(r),s=(n(200),n(13)),i=n(368),u=(n(201),n(181)),l=n.n(u),d=n(20),j=n.n(d),b=n(37),f=n(75),O=n(105),p=n(79),h=n(372),x=n(336),m=n(381),v=n(385),g=n(382),k=n(4);function y(e){var t=e.instanceTodo,n=e.setIsLogined,c=Object(a.useState)({username:"",password:""}),r=Object(s.a)(c,2),o=r[0],u=r[1],l=Object(a.useState)(!1),d=Object(s.a)(l,2),y=d[0],S=d[1],C=Object(a.useState)(!1),D=Object(s.a)(C,2),w=D[0],T=D[1],B=Object(a.useState)(),E=Object(s.a)(B,2),I=E[0],L=E[1],W=Object(a.useState)(""),P=Object(s.a)(W,2),A=P[0],F=P[1],U=function(e){u(Object(O.a)(Object(O.a)({},o),{},Object(f.a)({},e.target.name,e.target.value)))},z=function(e){F(e.response.data.message),L(e.response.status),T(!0)},H=function(){T(!1)},J=function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.post("/signup",n);case 3:M(n),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),z(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(b.a)(j.a.mark((function e(a){var c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.post("/login",a);case 3:c=e.sent,r=c.data.token,localStorage.setItem("token",r),r&&n(!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),z(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsxs)(i.a,{maxWidth:"sm",children:[Object(k.jsx)(p.a,{variant:"h2",align:"center",children:"ToDo"}),Object(k.jsxs)(h.a,{children:[Object(k.jsxs)(h.a,{children:[Object(k.jsx)(p.a,{variant:"h3",align:"center",style:{float:"left"},children:"Authorization"}),Object(k.jsx)(x.a,{variant:"contained",color:"default",onClick:function(e){S(!y)},style:{margin:10,float:"right"},children:y?"Login":"Signup"})]}),Object(k.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[Object(k.jsx)(m.a,{fullWidth:!0,variant:"outlined",margin:"normal",placeholder:"Enter your User name",id:"user name",type:"text",name:"username",onChange:U,value:o.username}),Object(k.jsx)(m.a,{fullWidth:!0,variant:"outlined",margin:"normal",placeholder:"Enter your password",id:"password",type:"password",name:"password",autoComplete:"on",onChange:U,value:o.password}),Object(k.jsx)(h.a,{container:!0,spacing:4,justify:"center",style:{padding:10},children:y?Object(k.jsx)(x.a,{type:"submit",variant:"contained",color:"secondary",style:{margin:10},onClick:function(e){return J(o)},children:"Signup"}):Object(k.jsx)(x.a,{variant:"contained",type:"submit",color:"primary",style:{margin:10},onClick:function(e){return M(o)},children:"Login"})})]})]}),Object(k.jsx)(v.a,{open:w,autoHideDuration:3e3,onClose:H,children:Object(k.jsxs)(g.a,{severity:"error",onClose:H,children:["Status: ",I,"  ",A]})})]})}var S=n(380),C=n(374),D=n(376),w=n(383),T=n(377),B=n(375),E=n(378);function I(e){var t=e.todo,n=e.handleTodoEdit,c=e.handleDelete,r=t.createdAt,o=Object(a.useState)(!1),i=Object(s.a)(o,2),u=i[0],l=i[1],d=Object(a.useState)(t.name),j=Object(s.a)(d,2),b=j[0],f=j[1],O=Object(a.useState)(t.done),p=Object(s.a)(O,1)[0];return Object(k.jsxs)(D.a,{children:[Object(k.jsx)(w.a,{checked:t.done,value:t.uuid,color:"primary",onClick:function(){return function(e){n(e.uuid,b,!e.done)}(t)}}),u?Object(k.jsx)(m.a,{fullWidth:!0,variant:"outlined",autoFocus:!0,value:b,onChange:function(e){return f(e.target.value)},onKeyDown:function(e){return function(e,a){"Enter"===e.key&&(e.preventDefault(),""!==b.trim()&&(n(a,b,p),l(!1))),"Escape"===e.key&&(l(!1),f(t.name))}(e,t.uuid)},onBlur:function(){l(!1),f(t.name)}}):Object(k.jsx)(T.a,{style:{overflowWrap:"break-word"},primary:t.name,onClick:function(){return l(!0)}}),Object(k.jsx)(T.a,{style:{textAlign:"right"},secondary:r}),Object(k.jsx)(B.a,{onClick:function(){return c(t.uuid)},children:Object(k.jsx)(E.a,{})})]})}function L(e){var t=e.toDos,n=e.handleTodoEdit,a=e.handleDelete;e.handleDone;return Object(k.jsx)(C.a,{children:t.map((function(e){return Object(k.jsx)(I,{todo:e,handleDelete:a,handleTodoEdit:n},e.uuid)}))})}var W=function(e){var t=e.handleSubmit,n=Object(a.useState)(""),c=Object(s.a)(n,2),r=c[0],o=c[1];return Object(k.jsx)("form",{onSubmit:function(e){e.preventDefault(),t(r),o("")},children:Object(k.jsx)(m.a,{fullWidth:!0,variant:"outlined",margin:"normal",onChange:function(e){var t=e.target;o(t.value)},value:r})})},P=n(379);function A(e){var t=e.setPage,n=e.sortByDate,a=e.sortByDone,c=e.setSortByDone,r=e.setSortByDate;return Object(k.jsxs)(h.a,{container:!0,spacing:4,justify:"space-between",children:[Object(k.jsx)(h.a,{item:!0,onClick:function(){t(1)},children:Object(k.jsxs)(P.a,{children:[Object(k.jsx)(x.a,{onClick:function(){""!==a&&c("")},color:""===a?"primary":"default",variant:""===a?"contained":"outlined",children:"All"}),Object(k.jsx)(x.a,{onClick:function(){"done"!==a&&c("done")},color:"done"===a?"primary":"default",variant:"done"===a?"contained":"outlined",children:"Done"}),Object(k.jsx)(x.a,{onClick:function(){"undone"!==a&&c("undone")},color:"undone"===a?"primary":"default",variant:"undone"===a?"contained":"outlined",children:"Undone"})]})}),Object(k.jsx)(h.a,{item:!0,children:Object(k.jsxs)(P.a,{children:[Object(k.jsx)(x.a,{onClick:function(){"desc"!==n&&r("desc")},color:"desc"===n?"primary":"default",variant:"desc"===n?"contained":"outlined",children:"Later"}),Object(k.jsx)(x.a,{onClick:function(){"asc"!==n&&r("asc")},color:"asc"===n?"primary":"default",variant:"asc"===n?"contained":"outlined",children:"Earlier"})]})})]})}var F=n(106),U=n.n(F),z=n(107),H=n.n(z);function J(e){for(var t=e.pagesCount,n=e.setPage,a=e.page,c=[],r=1;r<=Math.ceil(t);r++)c.push(r);return Object(k.jsxs)(h.a,{container:!0,spacing:4,justify:"center",style:{padding:10},children:[Object(k.jsxs)(x.a,{variant:"contained",color:"default",onClick:function(){return n(1)},children:[Object(k.jsx)(U.a,{}),Object(k.jsx)(U.a,{})]}),Object(k.jsx)(P.a,{children:c.map((function(e){return Object(k.jsx)(x.a,{color:e===a?"primary":"default",variant:e===a?"contained":"outlined",onClick:function(){return n(e)},children:e},e)}))}),Object(k.jsxs)(x.a,{variant:"contained",color:"default",onClick:function(){return n(t)},children:[Object(k.jsx)(H.a,{}),Object(k.jsx)(H.a,{})]})]})}function M(e){var t=e.instanceTodo,n=e.setIsLogined,c=Object(a.useState)([]),r=Object(s.a)(c,2),o=r[0],u=r[1],l=Object(a.useState)(""),d=Object(s.a)(l,2),f=d[0],O=d[1],m=Object(a.useState)("desc"),y=Object(s.a)(m,2),C=y[0],D=y[1],w=Object(a.useState)(1),T=Object(s.a)(w,2),B=T[0],E=T[1],I=Object(a.useState)(5),P=Object(s.a)(I,2),F=(P[0],P[1]),U=Object(a.useState)(!1),z=Object(s.a)(U,2),H=z[0],M=z[1],K=Object(a.useState)(!1),R=Object(s.a)(K,2),q=R[0],G=R[1],N=Object(a.useState)(),Q=Object(s.a)(N,2),V=Q[0],X=Q[1],Y=Object(a.useState)(""),Z=Object(s.a)(Y,2),$=Z[0],_=Z[1],ee=Object(a.useState)(""),te=Object(s.a)(ee,2),ne=te[0],ae=te[1],ce=function(e){_(e.response.data.message),X(e.response.status),G(!0)};console.log("render");var re=Object(a.useCallback)(Object(b.a)(j.a.mark((function e(){var a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=localStorage.getItem("token"),t.defaults.headers.common.Authorization="Bearer ".concat(a),e.next=5,t.get("/tasks",{params:{sortByDone:f,sortByDate:C,page:B,limit:5}});case 5:c=e.sent,u(c.data.Tasks),F(c.data.limit),ae(c.data.pagesCount),M(!0),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),ce(e.t0),"Invalid token"===e.t0.response.data.message&&(localStorage.removeItem("token"),n(!1));case 17:case"end":return e.stop()}}),e,null,[[0,12]])}))),[f,C,B]);Object(a.useEffect)((function(){re()}),[re]);var oe=function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,""===n.trim()){e.next=6;break}return e.next=4,t.post("/task",{name:n,done:!1});case 4:return e.next=6,re();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),ce(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.delete("/task/".concat(n));case 3:return e.next=5,re();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),ce(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(b.a)(j.a.mark((function e(n,a,c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.patch("/task/".concat(n),{name:a,done:c});case 3:return e.next=5,re();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),ce(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,a){return e.apply(this,arguments)}}(),ue=function(){G(!1)};return Object(k.jsxs)(i.a,{maxWidth:"sm",children:[Object(k.jsxs)(h.a,{children:[Object(k.jsx)(p.a,{variant:"h2",align:"center",style:{float:"left"},children:"ToDo"}),Object(k.jsx)(x.a,{variant:"contained",color:"secondary",style:{marginTop:20,float:"right"},onClick:function(e){n(!1)},children:"Logout"})]}),Object(k.jsx)(W,{handleSubmit:oe}),Object(k.jsx)(A,{sortByDone:f,setSortByDone:O,sortByDate:C,setSortByDate:D,setPage:E}),ne>1&&H&&Object(k.jsx)(J,{pagesCount:ne,totalTodos:o.length,page:B,setPage:E}),H&&Object(k.jsx)(L,{align:"center",handleDelete:se,toDos:o,handleTodoEdit:ie}),!H&&Object(k.jsx)(h.a,{container:!0,alignItems:"center",direction:"column",children:Object(k.jsx)(h.a,{item:!0,children:Object(k.jsx)(S.a,{})})}),Object(k.jsx)(v.a,{open:q,autoHideDuration:3e3,onClose:ue,children:Object(k.jsxs)(g.a,{severity:"error",onClose:ue,children:["Status: ",V,"  ",$]})})]})}var K=n(187);var R=function(){var e=l.a.create({baseURL:"https://todos-mvp.herokuapp.com"}),t=Object(a.useState)(!1),n=Object(s.a)(t,2),c=n[0],r=n[1],o=Object(a.useCallback)((function(){if(localStorage.token){console.log("localStorage.token",localStorage.token),console.log("localStorage.token",localStorage.token.split(".")[1]);var e=K.decode(localStorage.token);console.log("exp",e),e?r(!0):r(!1)&&localStorage.removeItem("token")}}),[]);return console.log("render"),Object(a.useLayoutEffect)((function(){o()}),[o]),Object(k.jsx)(i.a,{maxWidth:"sm",children:c?Object(k.jsx)(M,{instanceTodo:e,setIsLogined:r}):Object(k.jsx)(y,{setIsLogined:r,instanceTodo:e})})},q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,386)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};o.a.render(Object(k.jsx)(c.a.StrictMode,{children:Object(k.jsx)(R,{})}),document.getElementById("root")),q()}},[[335,1,2]]]);
//# sourceMappingURL=main.cbec3808.chunk.js.map