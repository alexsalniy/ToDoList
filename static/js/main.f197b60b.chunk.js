(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{115:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(10),o=n.n(r),s=(n(89),n(11)),i=n(148),u=(n(90),n(71)),l=n.n(u),j=n(16),d=n.n(j),b=n(27),O=n(44),f=n(52),p=n(48),h=n(152),x=n(116),m=n(161),v=n(165),g=n(162),y=n(4);function k(e){var t=e.instanceTodo,n=e.setIsLogined,c=Object(a.useState)({username:"",password:""}),r=Object(s.a)(c,2),o=r[0],u=r[1],l=Object(a.useState)(!1),j=Object(s.a)(l,2),k=j[0],S=j[1],C=Object(a.useState)(!1),D=Object(s.a)(C,2),w=D[0],T=D[1],B=Object(a.useState)(),E=Object(s.a)(B,2),I=E[0],L=E[1],W=Object(a.useState)(""),P=Object(s.a)(W,2),A=P[0],F=P[1],U=function(e){u(Object(f.a)(Object(f.a)({},o),{},Object(O.a)({},e.target.name,e.target.value)))},z=function(e){F(e.response.data.message),L(e.response.status),T(!0)},H=function(){T(!1)},J=function(){var e=Object(b.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.post("/signup",n);case 3:M(n),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),z(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(b.a)(d.a.mark((function e(a){var c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.post("/login",a);case 3:c=e.sent,r=c.data.token,localStorage.setItem("token",r),r&&n(!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),z(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsxs)(i.a,{maxWidth:"sm",children:[Object(y.jsx)(p.a,{variant:"h2",align:"center",children:"ToDo"}),Object(y.jsxs)(h.a,{children:[Object(y.jsxs)(h.a,{children:[Object(y.jsx)(p.a,{variant:"h3",align:"center",style:{float:"left"},children:"Authorization"}),Object(y.jsx)(x.a,{variant:"contained",color:"default",onClick:function(e){S(!k)},style:{margin:10,float:"right"},children:k?"Login":"Signup"})]}),Object(y.jsxs)("form",{onSubmit:function(e){e.preventDefault(),k?J(o):M(o),u("")},children:[Object(y.jsx)(m.a,{fullWidth:!0,variant:"outlined",margin:"normal",placeholder:"Enter your User name",id:"user name",type:"text",name:"username",onChange:U,value:o.username}),Object(y.jsx)(m.a,{fullWidth:!0,variant:"outlined",margin:"normal",placeholder:"Enter your password",id:"password",type:"password",name:"password",autoComplete:"on",onChange:U,value:o.password}),Object(y.jsx)(h.a,{container:!0,spacing:4,justify:"center",style:{padding:10},children:k?Object(y.jsx)(x.a,{variant:"contained",color:"secondary",style:{margin:10},onClick:function(e){return J(o)},children:"Signup"}):Object(y.jsx)(x.a,{variant:"contained",color:"primary",style:{margin:10},onClick:function(e){return M(o)},children:"Login"})})]})]}),Object(y.jsx)(v.a,{open:w,autoHideDuration:3e3,onClose:H,children:Object(y.jsxs)(g.a,{severity:"error",onClose:H,children:["Status: ",I,"  ",A]})})]})}var S=n(160),C=n(154),D=n(156),w=n(163),T=n(157),B=n(155),E=n(158);function I(e){var t=e.todo,n=e.handleTodoEdit,c=e.handleDelete,r=t.createdAt,o=Object(a.useState)(!1),i=Object(s.a)(o,2),u=i[0],l=i[1],j=Object(a.useState)(t.name),d=Object(s.a)(j,2),b=d[0],O=d[1],f=Object(a.useState)(t.done),p=Object(s.a)(f,1)[0];return Object(y.jsxs)(D.a,{children:[Object(y.jsx)(w.a,{checked:t.done,value:t.uuid,color:"primary",onClick:function(){return function(e){n(e.uuid,b,!e.done)}(t)}}),u?Object(y.jsx)(m.a,{fullWidth:!0,variant:"outlined",autoFocus:!0,value:b,onChange:function(e){return O(e.target.value)},onKeyDown:function(e){return function(e,a){"Enter"===e.key&&(e.preventDefault(),""!==b.trim()&&(n(a,b,p),l(!1))),"Escape"===e.key&&(l(!1),O(t.name))}(e,t.uuid)},onBlur:function(){l(!1),O(t.name)}}):Object(y.jsx)(T.a,{style:{overflowWrap:"break-word"},primary:t.name,onClick:function(){return l(!0)}}),Object(y.jsx)(T.a,{style:{textAlign:"right"},secondary:r}),Object(y.jsx)(B.a,{onClick:function(){return c(t.uuid)},children:Object(y.jsx)(E.a,{})})]})}function L(e){var t=e.toDos,n=e.handleTodoEdit,a=e.handleDelete;e.handleDone;return Object(y.jsx)(C.a,{children:t.map((function(e){return Object(y.jsx)(I,{todo:e,handleDelete:a,handleTodoEdit:n},e.uuid)}))})}var W=function(e){var t=e.handleSubmit,n=Object(a.useState)(""),c=Object(s.a)(n,2),r=c[0],o=c[1];return Object(y.jsx)("form",{onSubmit:function(e){e.preventDefault(),t(r),o("")},children:Object(y.jsx)(m.a,{fullWidth:!0,variant:"outlined",margin:"normal",onChange:function(e){var t=e.target;o(t.value)},value:r})})},P=n(159);function A(e){var t=e.setPage,n=e.sortByDate,a=e.sortByDone,c=e.setSortByDone,r=e.setSortByDate;return Object(y.jsxs)(h.a,{container:!0,spacing:4,justify:"space-between",children:[Object(y.jsx)(h.a,{item:!0,onClick:function(){t(1)},children:Object(y.jsxs)(P.a,{children:[Object(y.jsx)(x.a,{onClick:function(){""!==a&&c("")},color:""===a?"primary":"default",variant:""===a?"contained":"outlined",children:"All"}),Object(y.jsx)(x.a,{onClick:function(){"done"!==a&&c("done")},color:"done"===a?"primary":"default",variant:"done"===a?"contained":"outlined",children:"Done"}),Object(y.jsx)(x.a,{onClick:function(){"undone"!==a&&c("undone")},color:"undone"===a?"primary":"default",variant:"undone"===a?"contained":"outlined",children:"Undone"})]})}),Object(y.jsx)(h.a,{item:!0,children:Object(y.jsxs)(P.a,{children:[Object(y.jsx)(x.a,{onClick:function(){"desc"!==n&&r("desc")},color:"desc"===n?"primary":"default",variant:"desc"===n?"contained":"outlined",children:"Later"}),Object(y.jsx)(x.a,{onClick:function(){"asc"!==n&&r("asc")},color:"asc"===n?"primary":"default",variant:"asc"===n?"contained":"outlined",children:"Earlier"})]})})]})}var F=n(53),U=n.n(F),z=n(54),H=n.n(z);function J(e){for(var t=e.pagesCount,n=e.setPage,a=e.page,c=[],r=1;r<=Math.ceil(t);r++)c.push(r);return Object(y.jsxs)(h.a,{container:!0,spacing:4,justify:"center",style:{padding:10},children:[Object(y.jsxs)(x.a,{variant:"contained",color:"default",onClick:function(){return n(1)},children:[Object(y.jsx)(U.a,{}),Object(y.jsx)(U.a,{})]}),Object(y.jsx)(P.a,{children:c.map((function(e){return Object(y.jsx)(x.a,{color:e===a?"primary":"default",variant:e===a?"contained":"outlined",onClick:function(){return n(e)},children:e},e)}))}),Object(y.jsxs)(x.a,{variant:"contained",color:"default",onClick:function(){return n(t)},children:[Object(y.jsx)(H.a,{}),Object(y.jsx)(H.a,{})]})]})}function M(e){var t=e.instanceTodo,n=e.setIsLogined,c=Object(a.useState)([]),r=Object(s.a)(c,2),o=r[0],u=r[1],l=Object(a.useState)(""),j=Object(s.a)(l,2),O=j[0],f=j[1],m=Object(a.useState)("desc"),k=Object(s.a)(m,2),C=k[0],D=k[1],w=Object(a.useState)(1),T=Object(s.a)(w,2),B=T[0],E=T[1],I=Object(a.useState)(5),P=Object(s.a)(I,2),F=P[0],U=P[1],z=Object(a.useState)(!1),H=Object(s.a)(z,2),M=H[0],K=H[1],R=Object(a.useState)(!1),q=Object(s.a)(R,2),G=q[0],N=q[1],Q=Object(a.useState)(),V=Object(s.a)(Q,2),X=V[0],Y=V[1],Z=Object(a.useState)(""),$=Object(s.a)(Z,2),_=$[0],ee=$[1],te=Object(a.useState)(""),ne=Object(s.a)(te,2),ae=ne[0],ce=ne[1],re=function(e){ee(e.response.data.message),Y(e.response.status),N(!0)},oe=Object(a.useCallback)(Object(b.a)(d.a.mark((function e(){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=localStorage.getItem("token"),t.defaults.headers.common.Authorization="Bearer ".concat(a),e.next=5,t.get("/tasks/",{params:{sortByDone:O,sortByDate:C,page:B,limit:F}});case 5:c=e.sent,u(c.data.Tasks),U(c.data.limit),ce(c.data.pagesCount),K(!0),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),re(e.t0),"Invalid token"===e.t0.response.data.message&&(localStorage.removeItem("token"),n(!1));case 17:case"end":return e.stop()}}),e,null,[[0,12]])}))),[O,C,B]);Object(a.useEffect)((function(){oe()}),[oe]);var se=function(){var e=Object(b.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,""===n.trim()){e.next=6;break}return e.next=4,t.post("/task/",{name:n,done:!1});case 4:return e.next=6,oe();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),re(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(b.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.delete("/task/".concat(n));case 3:return e.next=5,oe();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),re(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=Object(b.a)(d.a.mark((function e(n,a,c){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.patch("/task/".concat(n),{name:a,done:c});case 3:return e.next=5,oe();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),re(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,a){return e.apply(this,arguments)}}(),le=function(){N(!1)};return Object(y.jsxs)(i.a,{maxWidth:"sm",children:[Object(y.jsxs)(h.a,{children:[Object(y.jsx)(p.a,{variant:"h2",align:"center",style:{float:"left"},children:"ToDo"}),Object(y.jsx)(x.a,{variant:"contained",color:"secondary",style:{marginTop:20,float:"right"},onClick:function(e){n(!1)},children:"Logout"})]}),Object(y.jsx)(W,{handleSubmit:se}),Object(y.jsx)(A,{sortByDone:O,setSortByDone:f,sortByDate:C,setSortByDate:D,setPage:E}),ae>1&&M&&Object(y.jsx)(J,{pagesCount:ae,totalTodos:o.length,page:B,setPage:E}),M&&Object(y.jsx)(L,{align:"center",handleDelete:ie,toDos:o,handleTodoEdit:ue}),!M&&Object(y.jsx)(h.a,{container:!0,alignItems:"center",direction:"column",children:Object(y.jsx)(h.a,{item:!0,children:Object(y.jsx)(S.a,{})})}),Object(y.jsx)(v.a,{open:G,autoHideDuration:3e3,onClose:le,children:Object(y.jsxs)(g.a,{severity:"error",onClose:le,children:["Status: ",X,"  ",_]})})]})}var K=function(){var e=l.a.create({baseURL:"https://todos-mvp.herokuapp.com"}),t=Object(a.useState)(!1),n=Object(s.a)(t,2),c=n[0],r=n[1],o=Object(a.useCallback)((function(){localStorage.token&&r(!0)}),[]);return Object(a.useEffect)((function(){o()}),[o]),Object(y.jsx)(i.a,{maxWidth:"sm",children:c?Object(y.jsx)(M,{instanceTodo:e,setIsLogined:r}):Object(y.jsx)(k,{setIsLogined:r,instanceTodo:e})})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,166)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};o.a.render(Object(y.jsx)(c.a.StrictMode,{children:Object(y.jsx)(K,{})}),document.getElementById("root")),R()},89:function(e,t,n){},90:function(e,t,n){}},[[115,1,2]]]);
//# sourceMappingURL=main.f197b60b.chunk.js.map